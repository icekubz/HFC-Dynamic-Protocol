<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Thy Essential | The Economy of You</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body { 
            background-color: #0f172a; 
            color: white; 
            font-family: 'Segoe UI', sans-serif; 
            height: 100vh;
            overflow: hidden; 
        }
        .hero-section {
            height: 100vh;
            display: flex;
            align-items: center;
            background: radial-gradient(circle at top right, #1e293b, #0f172a);
        }
        .text-gold { color: #fbbf24; }
        .btn-gold { 
            background: #fbbf24; 
            color: #0f172a; 
            font-weight: bold; 
            padding: 12px 30px; 
            border-radius: 50px; 
            border: none;
            transition: 0.3s;
        }
        .btn-gold:hover { background: #f59e0b; transform: scale(1.05); }
        .form-control { background-color: #1e293b; border: 1px solid #334155; color: white; }
        .form-control:focus { background-color: #1e293b; color: white; border-color: #fbbf24; box-shadow: none; }
    </style>
</head>
<body>

    <nav class="navbar navbar-expand-lg navbar-dark fixed-top py-4">
        <div class="container">
            <a class="navbar-brand fw-bold" href="#"><i class="fa-solid fa-cube text-gold"></i> THY ESSENTIAL</a>
            <div class="ms-auto">
                <button class="btn btn-outline-light rounded-pill px-4 me-2" data-bs-toggle="modal" data-bs-target="#loginModal">Log In</button>
                <button class="btn btn-gold" data-bs-toggle="modal" data-bs-target="#joinModal">Join Ecosystem</button>
            </div>
        </div>
    </nav>

    <section class="hero-section">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-lg-7">
                    <h6 class="text-gold fw-bold tracking-wide">THE HFC PROTOCOL</h6>
                    <h1 class="display-3 fw-bold mt-2 mb-4">Services For You.<br>By You. Via You.</h1>
                    <p class="lead text-secondary mb-5 w-75">
                        Thy Essential turns everyday liabilities into income-generating assets. 
                        Start as a Consumer, upgrade to own your economy.
                    </p>
                    <div class="d-flex gap-3">
                        <button class="btn btn-gold btn-lg" data-bs-toggle="modal" data-bs-target="#joinModal">Create Free Account</button>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <div class="modal fade" id="loginModal" tabindex="-1">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content bg-dark border-secondary">
                <div class="modal-header border-0"><h5 class="modal-title fw-bold">Welcome Back</h5><button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button></div>
                <div class="modal-body p-4">
                    <input id="li_email" class="form-control mb-3 p-3" placeholder="Email Address">
                    <input id="li_pass" type="password" class="form-control mb-4 p-3" placeholder="Password">
                    <button class="btn btn-primary w-100 py-3 fw-bold" onclick="login()">Log In</button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="joinModal" tabindex="-1">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content bg-dark border-secondary">
                <div class="modal-header border-0"><h5 class="modal-title fw-bold">Join Ecosystem</h5><button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button></div>
                <div class="modal-body p-4">
                    <input id="su_email" class="form-control mb-3 p-3" placeholder="Email Address">
                    <input id="su_pass" type="password" class="form-control mb-3 p-3" placeholder="Create Password">
                    <input id="su_sponsor" class="form-control mb-3 p-3" placeholder="Sponsor Email (Optional)">
                    <div class="form-check mb-3">
                        <input class="form-check-input" type="checkbox" id="su_vendor">
                        <label class="form-check-label text-muted small">Register as Vendor</label>
                    </div>
                    <input id="su_vname" class="form-control mb-4 p-3 d-none" placeholder="Brand Name">
                    <button class="btn btn-gold w-100 py-3 fw-bold" onclick="signup()">Create Account</button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        document.getElementById('su_vendor').onchange = (e) => document.getElementById('su_vname').classList.toggle('d-none', !e.target.checked);
        
        async function login() {
            const email = document.getElementById('li_email').value;
            const password = document.getElementById('li_pass').value;
            const res = await fetch('/api/login', { method:'POST', headers:{'Content-Type':'application/json'}, body:JSON.stringify({email, password}) });
            const data = await res.json();
            if(data.success) { localStorage.setItem('userId', data.userId); window.location.href='dashboard.html'; } else alert(data.message);
        }

        async function signup() {
            const email = document.getElementById('su_email').value;
            const password = document.getElementById('su_pass').value;
            const sponsorEmail = document.getElementById('su_sponsor').value;
            const asVendor = document.getElementById('su_vendor').checked;
            const vendorName = document.getElementById('su_vname').value;
            
            const res = await fetch('/api/signup', { method:'POST', headers:{'Content-Type':'application/json'}, body:JSON.stringify({email, password, sponsorEmail, asVendor, vendorName}) });
            const data = await res.json();
            if(data.success) { localStorage.setItem('userId', data.userId); window.location.href='dashboard.html'; } else alert(data.message);
        }
    </script>
</body>
</html>